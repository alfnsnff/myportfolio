@use 'sass:math';
@use 'variables' as *;

// ============================================================================
// LAYOUT MIXINS
// ============================================================================

@mixin flex-center {
  display: flex;
  justify-content: center;
  align-items: center;
}

@mixin flex-between {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

@mixin flex-column-center {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
}

@mixin absolute-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

@mixin full-cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

// Container System
@mixin container($max-width: $container) {
  max-width: $max-width;
  margin: 0 auto;
  padding-left: $spacing-6;
  padding-right: $spacing-6;
  
  @media (max-width: $screen-sm) {
    padding-left: $spacing-4;
    padding-right: $spacing-4;
  }
}

@mixin container-fluid {
  width: 100%;
  padding-left: $spacing-6;
  padding-right: $spacing-6;
  
  @media (max-width: $screen-sm) {
    padding-left: $spacing-4;
    padding-right: $spacing-4;
  }
}

// Grid System
@mixin grid($columns: 1, $gap: $spacing-6) {
  display: grid;
  grid-template-columns: repeat($columns, 1fr);
  gap: $gap;
}

@mixin grid-responsive($sm: 1, $md: 2, $lg: 3, $gap: $spacing-6) {
  display: grid;
  gap: $gap;
  grid-template-columns: repeat($sm, 1fr);
  
  @media (min-width: $screen-md) {
    grid-template-columns: repeat($md, 1fr);
  }
  
  @media (min-width: $screen-lg) {
    grid-template-columns: repeat($lg, 1fr);
  }
}

// ============================================================================
// VISUAL EFFECTS
// ============================================================================

@mixin glass-effect($bg: $glass-bg, $border: $glass-border, $blur: $glass-blur) {
  background: $bg;
  backdrop-filter: blur($blur);
  -webkit-backdrop-filter: blur($blur);
  border: 1px solid $border;
  box-shadow: $shadow-lg;
}

@mixin gradient-text($gradient: $gradient-primary) {
  background: $gradient;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  color: transparent;
}

@mixin animate-gradient($size: 400%) {
  background-size: $size $size;
  animation: gradientShift 6s ease infinite;
}

@mixin text-shadow($color: rgba($black, 0.25)) {
  text-shadow: 0 2px 4px $color;
}

// Glow Effects
@mixin glow($color: $primary, $intensity: 0.5) {
  box-shadow: 0 0 20px rgba($color, $intensity);
}

@mixin pulse-glow($color: $primary) {
  animation: pulseGlow 2s ease-in-out infinite alternate;
  
  @keyframes pulseGlow {
    from { box-shadow: 0 0 20px rgba($color, 0.5); }
    to { box-shadow: 0 0 30px rgba($color, 0.8); }
  }
}

// ============================================================================
// INTERACTION MIXINS
// ============================================================================

@mixin hover-lift($lift: 8px, $scale: 1.02) {
  transition: transform $transition, box-shadow $transition;
  
  &:hover {
    transform: translateY(-$lift) scale($scale);
    box-shadow: $shadow-xl;
  }
}

@mixin hover-grow($scale: 1.05) {
  transition: transform $transition;
  
  &:hover {
    transform: scale($scale);
  }
}

@mixin hover-fade($opacity: 0.8) {
  transition: opacity $transition;
  
  &:hover {
    opacity: $opacity;
  }
}

@mixin button-reset {
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  font: inherit;
  cursor: pointer;
}

@mixin focus-ring($color: $primary) {
  &:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba($color, 0.3);
  }
  
  &:focus:not(:focus-visible) {
    box-shadow: none;
  }
}

// ============================================================================
// TYPOGRAPHY MIXINS
// ============================================================================

@mixin font-size($size, $line-height: null) {
  font-size: $size;
  
  @if $line-height {
    line-height: $line-height;
  }
}

@mixin heading($size: $text-2xl, $weight: $font-bold, $line-height: $leading-tight) {
  font-size: $size;
  font-weight: $weight;
  line-height: $line-height;
  font-family: $font-heading;
}

@mixin text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

@mixin text-clamp($lines: 3) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// ============================================================================
// RESPONSIVE MIXINS
// ============================================================================

@mixin mobile-only {
  @media (max-width: #{$screen-sm - 1px}) {
    @content;
  }
}

@mixin tablet-up {
  @media (min-width: $screen-md) {
    @content;
  }
}

@mixin desktop-up {
  @media (min-width: $screen-lg) {
    @content;
  }
}

@mixin large-up {
  @media (min-width: $screen-xl) {
    @content;
  }
}

@mixin respond-to($breakpoint) {
  @if $breakpoint == xs {
    @media (min-width: $screen-xs) { @content; }
  }
  @else if $breakpoint == sm {
    @media (min-width: $screen-sm) { @content; }
  }
  @else if $breakpoint == md {
    @media (min-width: $screen-md) { @content; }
  }
  @else if $breakpoint == lg {
    @media (min-width: $screen-lg) { @content; }
  }
  @else if $breakpoint == xl {
    @media (min-width: $screen-xl) { @content; }
  }
  @else if $breakpoint == 2xl {
    @media (min-width: $screen-2xl) { @content; }
  }
}

// ============================================================================
// ANIMATION MIXINS
// ============================================================================

@mixin animate-in($duration: $duration-500, $delay: 0s) {
  opacity: 0;
  animation: fadeInUp $duration $ease-out $delay forwards;
}

@mixin animate-on-scroll {
  opacity: 0;
  transform: translateY(30px);
  transition: all $transition-slow;
  
  &.in-view {
    opacity: 1;
    transform: translateY(0);
  }
}

@mixin loading-skeleton {
  background: linear-gradient(90deg, 
    $gray-200 25%, 
    $gray-100 50%, 
    $gray-200 75%
  );
  background-size: 200% 100%;
  animation: skeleton-loading 2s infinite;
  
  @keyframes skeleton-loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
}

// ============================================================================
// UTILITY MIXINS
// ============================================================================

@mixin aspect-ratio($ratio: 1) {
  aspect-ratio: $ratio;
  
  @supports not (aspect-ratio: 1) {
    &::before {
      content: '';
      display: block;
      padding-top: math.div(100%, $ratio);
    }
  }
}

@mixin sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

@mixin scrollbar($width: 8px, $track: $gray-200, $thumb: $gray-400) {
  &::-webkit-scrollbar {
    width: $width;
  }
  
  &::-webkit-scrollbar-track {
    background: $track;
    border-radius: $radius-full;
  }
  
  &::-webkit-scrollbar-thumb {
    background: $thumb;
    border-radius: $radius-full;
    
    &:hover {
      background: $gray-500;
    }
  }
}

// ============================================================================
// KEYFRAMES
// ============================================================================

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}